import { Style } from "./sidebar.styles";
import Logo from "../Logo/logo.component";
import { useRouter } from "next/router";
import Link from "next/link";
import { purgeStoredState } from "redux-persist";
import { persistConfig } from "../../../store/index";
import { useDispatch } from "react-redux";

function Sidebar({ dark }) {
  const router = useRouter();
  const dispatch = useDispatch();

  function activeCheck(str) {
    if (router.pathname === str) {
      return true;
    }
  }

  function logOut() {
    router.push("/login");
    purgeStoredState(persistConfig);
    setTimeout(() => {
      dispatch({ type: "USER_LOGOUT" });
    }, 0);
  }

  return (
    <Style.Container dark={dark}>
      <Logo mode="blue" />
      <div className="routes-container">
        <Link href="/user">
          <Style.Route dark={dark} active={activeCheck("/user")}>
            <div className="route-img">
              <svg
                width="28"
                height="28"
                viewBox="0 0 28 28"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M21.7777 8.44444H20.6666V7.33333C20.6666 6.44928 20.3154 5.60143 19.6903 4.97631C19.0652 4.35119 18.2174 4 17.3333 4L6.22219 4C5.33813 4 4.49029 4.35119 3.86517 4.97631C3.24004 5.60143 2.88885 6.44928 2.88885 7.33333L2.88885 20.6667C2.88885 21.5507 3.24004 22.3986 3.86517 23.0237C4.49029 23.6488 5.33813 24 6.22219 24H21.7777C22.6618 24 23.5096 23.6488 24.1348 23.0237C24.7599 22.3986 25.1111 21.5507 25.1111 20.6667V11.7778C25.1111 10.8937 24.7599 10.0459 24.1348 9.42075C23.5096 8.79563 22.6618 8.44444 21.7777 8.44444ZM6.22219 6.22222L17.3333 6.22222C17.628 6.22222 17.9106 6.33929 18.119 6.54766C18.3273 6.75603 18.4444 7.03865 18.4444 7.33333V8.44444H6.22219C5.9275 8.44444 5.64489 8.32738 5.43651 8.11901C5.22814 7.91063 5.11108 7.62802 5.11108 7.33333C5.11108 7.03865 5.22814 6.75603 5.43651 6.54766C5.64489 6.33929 5.9275 6.22222 6.22219 6.22222ZM22.8889 17.3333H21.7777C21.4831 17.3333 21.2004 17.2163 20.9921 17.0079C20.7837 16.7995 20.6666 16.5169 20.6666 16.2222C20.6666 15.9275 20.7837 15.6449 20.9921 15.4365C21.2004 15.2282 21.4831 15.1111 21.7777 15.1111H22.8889V17.3333ZM22.8889 12.8889H21.7777C20.8937 12.8889 20.0458 13.2401 19.4207 13.8652C18.7956 14.4903 18.4444 15.3382 18.4444 16.2222C18.4444 17.1063 18.7956 17.9541 19.4207 18.5792C20.0458 19.2044 20.8937 19.5556 21.7777 19.5556H22.8889V20.6667C22.8889 20.9614 22.7718 21.244 22.5634 21.4523C22.355 21.6607 22.0724 21.7778 21.7777 21.7778H6.22219C5.9275 21.7778 5.64489 21.6607 5.43651 21.4523C5.22814 21.244 5.11108 20.9614 5.11108 20.6667L5.11108 10.4778C5.46804 10.6034 5.84378 10.6672 6.22219 10.6667H21.7777C22.0724 10.6667 22.355 10.7837 22.5634 10.9921C22.7718 11.2005 22.8889 11.4831 22.8889 11.7778V12.8889Z"
                  fill="#969B9F"
                />
              </svg>
            </div>
            <p>Your Wallet</p>
          </Style.Route>
        </Link>
        <Link href="/market-overview">
          <Style.Route dark={dark} active={activeCheck("/market-overview")}>
            <div className="route-img">
              <svg
                width="28"
                height="28"
                viewBox="0 0 28 28"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M24 16.222H22.8889V3.99978C22.8889 3.7051 22.7719 3.42248 22.5635 3.21411C22.3551 3.00573 22.0725 2.88867 21.7778 2.88867H6.22225C5.92756 2.88867 5.64495 3.00573 5.43658 3.21411C5.2282 3.42248 5.11114 3.7051 5.11114 3.99978V16.222H4.00003C3.70534 16.222 3.42273 16.3391 3.21435 16.5474C3.00598 16.7558 2.88892 17.0384 2.88892 17.3331C2.88892 17.6278 3.00598 17.9104 3.21435 18.1188C3.42273 18.3272 3.70534 18.4442 4.00003 18.4442H12.8889V19.722L7.83336 23.0553C7.62595 23.1837 7.46656 23.3768 7.37977 23.6048C7.29298 23.8327 7.28362 24.0829 7.35313 24.3167C7.42264 24.5505 7.56716 24.755 7.7644 24.8985C7.96163 25.042 8.20061 25.1167 8.44447 25.1109C8.66292 25.1134 8.87665 25.0473 9.05558 24.922L12.8889 22.3887V23.9998C12.8889 24.2945 13.006 24.5771 13.2144 24.7855C13.4227 24.9938 13.7053 25.1109 14 25.1109C14.2947 25.1109 14.5773 24.9938 14.7857 24.7855C14.9941 24.5771 15.1111 24.2945 15.1111 23.9998V22.3887L18.9445 24.922C19.1234 25.0473 19.3371 25.1134 19.5556 25.1109C19.793 25.1091 20.0235 25.0312 20.2135 24.8889C20.4034 24.7465 20.5428 24.547 20.6111 24.3196C20.6794 24.0923 20.6731 23.849 20.5932 23.6255C20.5132 23.402 20.3637 23.21 20.1667 23.0776L15.1111 19.7442V18.4442H24C24.2947 18.4442 24.5773 18.3272 24.7857 18.1188C24.9941 17.9104 25.1111 17.6278 25.1111 17.3331C25.1111 17.0384 24.9941 16.7558 24.7857 16.5474C24.5773 16.3391 24.2947 16.222 24 16.222ZM20.6667 16.222H7.33336V5.11089H20.6667V16.222ZM10.6667 13.9998C10.8497 13.9988 11.0296 13.9527 11.1905 13.8655C11.3514 13.7782 11.4883 13.6526 11.5889 13.4998L13.0667 11.2776L14.3222 12.5442C14.4388 12.6615 14.5801 12.7513 14.7358 12.8071C14.8915 12.8628 15.0577 12.8831 15.2222 12.8664C15.3861 12.8485 15.5438 12.7943 15.6841 12.7078C15.8244 12.6213 15.9437 12.5047 16.0334 12.3664L18.2556 9.03312C18.3864 8.78915 18.4215 8.50512 18.3539 8.23665C18.2864 7.96818 18.121 7.73461 17.8902 7.58169C17.6594 7.42876 17.3799 7.3675 17.1063 7.40989C16.8327 7.45229 16.5848 7.59529 16.4111 7.81089L14.9334 10.0331L13.6778 8.76645C13.5612 8.64915 13.4199 8.55935 13.2642 8.5036C13.1085 8.44786 12.9423 8.42757 12.7778 8.44423C12.614 8.4622 12.4562 8.51639 12.3159 8.60287C12.1756 8.68935 12.0564 8.80595 11.9667 8.94423L9.74447 12.2776C9.58366 12.5225 9.52612 12.8211 9.58439 13.1083C9.64266 13.3954 9.81201 13.648 10.0556 13.8109C10.2345 13.9362 10.4482 14.0023 10.6667 13.9998Z"
                  fill="#969B9F"
                />
              </svg>
            </div>
            <p>Market Overview</p>
          </Style.Route>
        </Link>
        <Link href="/order-history">
          <Style.Route dark={dark} active={activeCheck("/order-history")}>
            <div className="route-img">
              <svg
                width="28"
                height="28"
                viewBox="0 0 28 28"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M20.6674 2.88916H9.55626C8.37752 2.88916 7.24706 3.35741 6.41356 4.19091C5.58007 5.0244 5.11182 6.15486 5.11182 7.3336V20.6669C5.11182 21.8457 5.58007 22.9761 6.41356 23.8096C7.24706 24.6431 8.37752 25.1114 9.55626 25.1114H20.6674C21.2567 25.1114 21.822 24.8773 22.2387 24.4605C22.6555 24.0438 22.8896 23.4785 22.8896 22.8892V5.11138C22.8896 4.52201 22.6555 3.95678 22.2387 3.54003C21.822 3.12329 21.2567 2.88916 20.6674 2.88916ZM7.33404 7.3336C7.33404 6.74423 7.56816 6.179 7.98491 5.76226C8.40166 5.34551 8.96689 5.11138 9.55626 5.11138H20.6674V16.2225H9.55626C8.77297 16.2258 8.00514 16.4408 7.33404 16.8447V7.3336ZM9.55626 22.8892C8.96689 22.8892 8.40166 22.655 7.98491 22.2383C7.56816 21.8215 7.33404 21.2563 7.33404 20.6669C7.33404 20.0776 7.56816 19.5123 7.98491 19.0956C8.40166 18.6788 8.96689 18.4447 9.55626 18.4447H20.6674V22.8892H9.55626ZM11.7785 9.55583H16.2229C16.5176 9.55583 16.8002 9.43876 17.0086 9.23039C17.217 9.02202 17.334 8.7394 17.334 8.44472C17.334 8.15003 17.217 7.86741 17.0086 7.65904C16.8002 7.45067 16.5176 7.3336 16.2229 7.3336H11.7785C11.4838 7.3336 11.2012 7.45067 10.9928 7.65904C10.7844 7.86741 10.6674 8.15003 10.6674 8.44472C10.6674 8.7394 10.7844 9.02202 10.9928 9.23039C11.2012 9.43876 11.4838 9.55583 11.7785 9.55583Z"
                  fill="#969B9F"
                />
              </svg>
            </div>
            <p>Order History</p>
          </Style.Route>
        </Link>
        <Style.Route dark={dark} onClick={logOut}>
          <div className="route-img">
            <svg
              width="28"
              height="28"
              viewBox="0 0 28 28"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M7.33339 13.9997C7.62808 13.9997 7.91069 13.8826 8.11906 13.6742C8.32744 13.4659 8.4445 13.1832 8.4445 12.8886V9.55522C8.4445 9.26053 8.56156 8.97792 8.76994 8.76955C8.97831 8.56117 9.26093 8.44411 9.55561 8.44411H17.9889L17.6556 8.76633C17.5515 8.86962 17.4688 8.99251 17.4124 9.12791C17.356 9.26331 17.3269 9.40854 17.3269 9.55522C17.3269 9.7019 17.356 9.84713 17.4124 9.98253C17.4688 10.1179 17.5515 10.2408 17.6556 10.3441C17.7589 10.4483 17.8818 10.5309 18.0172 10.5873C18.1526 10.6437 18.2978 10.6728 18.4445 10.6728C18.5912 10.6728 18.7364 10.6437 18.8718 10.5873C19.0072 10.5309 19.1301 10.4483 19.2334 10.3441L22.2334 7.333L19.2334 4.32189C19.1298 4.21829 19.0068 4.13611 18.8714 4.08004C18.7361 4.02397 18.591 3.99512 18.4445 3.99512C18.298 3.99512 18.1529 4.02397 18.0176 4.08004C17.8822 4.13611 17.7592 4.21829 17.6556 4.32189C17.4464 4.53111 17.3288 4.81488 17.3288 5.11077C17.3288 5.40667 17.4464 5.69044 17.6556 5.89966L17.9889 6.22189H9.55561C8.67156 6.22189 7.82371 6.57308 7.19859 7.1982C6.57347 7.82332 6.22228 8.67116 6.22228 9.55522V12.8886C6.22228 13.1832 6.33934 13.4659 6.54772 13.6742C6.75609 13.8826 7.03871 13.9997 7.33339 13.9997ZM20.6667 13.9997C20.372 13.9997 20.0894 14.1167 19.881 14.3251C19.6727 14.5335 19.5556 14.8161 19.5556 15.1108V18.4441C19.5556 18.7388 19.4386 19.0214 19.2302 19.2298C19.0218 19.4382 18.7392 19.5552 18.4445 19.5552H10.0112L10.3445 19.233C10.5537 19.0238 10.6713 18.74 10.6713 18.4441C10.6713 18.1482 10.5537 17.8644 10.3445 17.6552C10.1353 17.446 9.8515 17.3284 9.55561 17.3284C9.25972 17.3284 8.97595 17.446 8.76672 17.6552L5.76672 20.6663L8.76672 23.6774C8.87002 23.7816 8.99291 23.8642 9.1283 23.9207C9.2637 23.9771 9.40893 24.0061 9.55561 24.0061C9.70229 24.0061 9.84752 23.9771 9.98292 23.9207C10.1183 23.8642 10.2412 23.7816 10.3445 23.6774C10.4486 23.5741 10.5313 23.4513 10.5877 23.3159C10.6441 23.1805 10.6732 23.0352 10.6732 22.8886C10.6732 22.7419 10.6441 22.5966 10.5877 22.4612C10.5313 22.3258 10.4486 22.203 10.3445 22.0997L10.0112 21.7774H18.4445C19.3286 21.7774 20.1764 21.4263 20.8015 20.8011C21.4266 20.176 21.7778 19.3282 21.7778 18.4441V15.1108C21.7778 14.8161 21.6608 14.5335 21.4524 14.3251C21.244 14.1167 20.9614 13.9997 20.6667 13.9997Z"
                fill="#969B9F"
              />
            </svg>
          </div>
          <p>Log Out</p>
        </Style.Route>
      </div>
    </Style.Container>
  );
}

export default Sidebar;
